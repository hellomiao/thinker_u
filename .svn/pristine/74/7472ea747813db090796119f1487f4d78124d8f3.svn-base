<?php
/**
 * Created by PhpStorm.
 * User: yangchunrun
 * Date: 17/7/24
 * Time: 下午1:53
 */
ini_set('date.timezone', 'Asia/Chongqing');
//获取2点之间的距离
function distance($l1,$l2,$radius = 6378.137)
{
    $lat1=$l1[1];
    $lon1=$l1[0];
    $lat2=$l2[1];
    $lon2=$l2[0];
    $rad = floatval(M_PI / 180.0);

    $lat1 = floatval($lat1) * $rad;
    $lon1 = floatval($lon1) * $rad;
    $lat2 = floatval($lat2) * $rad;
    $lon2 = floatval($lon2) * $rad;

    $theta = $lon2 - $lon1;

    $dist = acos(sin($lat1) * sin($lat2) +
        cos($lat1) * cos($lat2) * cos($theta)
    );

    if ($dist < 0 ) {
        $dist += M_PI;
    }

    return $dist = $dist * $radius;
}


$lon1 = ['104.025322','30.744183'];
$lon2 = ['104.039948','30.746887'];

echo distance($lon2,$lon1);

//echo date("Y-m-d H:i:s",1502265600);
//echo strtotime("2017-08-15 00:00:00");