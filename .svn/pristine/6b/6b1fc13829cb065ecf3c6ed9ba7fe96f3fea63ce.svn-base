<?php
/**
 * Created by PhpStorm.
 * User: yangchunrun
 * Date: 17/7/24
 * Time: 下午1:53
 */
ini_set('date.timezone', 'Asia/Chongqing');
//获取2点之间的距离
function distance($lat1, $lon1, $lat2,$lon2,$radius = 6378.137)
{
    $rad = floatval(M_PI / 180.0);

    $lat1 = floatval($lat1) * $rad;
    $lon1 = floatval($lon1) * $rad;
    $lat2 = floatval($lat2) * $rad;
    $lon2 = floatval($lon2) * $rad;

    $theta = $lon2 - $lon1;

    $dist = acos(sin($lat1) * sin($lat2) +
        cos($lat1) * cos($lat2) * cos($theta)
    );

    if ($dist < 0 ) {
        $dist += M_PI;
    }

    return $dist = $dist * $radius;
}


$lon1 = ['121.518998','31.253411'];
$lon2 = ['120.744587','31.277117'];

$lat2 = '31.277117';
$lon2 = '120.744587';

echo distance($lat1, $lon1, $lat2, $lon2);   // 73.734589823354